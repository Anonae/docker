
<div class="container text-center" style="padding-top: 100px ;padding-bottom: 105px ;background-color: #fff;" align="center" >
   <div ><center><h4 class="topic-style" ><b>FORM</b></h4><br><br>
         <form class="needs-validation container text-center" novalidate action="" method="post" id='frm_contact'>
            <div class="form-row text-center row" >
               <div class="col-12">
                  <div class="row " >
                     <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="name">Name</label>
                              </div>
                              <div class="col-9">
                                 <input type="text" class="form-control" id="name" name="name" value="" placeholder="ชื่อ" required>
                                 <div class="invalid-feedback chk_name">

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="lastname">Last Name</label>
                              </div>
                              <div class="col-9">
                                 <input type="text" class="form-control" id="lastname" name="lastname" value="" placeholder="นามสกุล" required>
                                 <div class="invalid-feedback chk_name">

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="tel">Tel.</label>
                              </div>
                              <div class="col-9">
                                 <input type="tel" class="form-control" id="tel" name="tel" value="" placeholder="เบอร์ติดต่อ" required>
                                 <div class="invalid-feedback chk_tel">

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="email">E-mail</label>
                              </div>
                              <div class="col-9">
                                 <input type="email" class="form-control" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" id="email" name="email" value="" placeholder="อีเมลล์" required>
                                 <div class="invalid-feedback chk_email">

                                 </div>
                              </div>
                           </div>
                        </div>

                     </div>
                     <div class="col-lg-6 col-md-6 col-sm-12 col-12 ">
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="subject">Subject</label>
                              </div>
                              <div class="col-9">
                                 <input type="text" class="form-control" id="subject" name="subject" value="" placeholder="หัวข้อ" required>
                                 <div class="invalid-feedback chk_subject">

                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12 col-sm-12 mb-3" >
                           <div class="row">
                              <div class="col-3 text-left">
                                 <label for="message" >Message</label>
                              </div>
                              <div class="col-9">
                                 <textarea style="height:150px " type="text" class="form-control" name="message" value="" id="message" placeholder="ข้อความ" required></textarea>
                                 <div class="invalid-feedback chk_message">

                                 </div>
                              </div>
                           </div>
                        </div>

                        <div class="text-right mr-15 mt-30">
                           <button class="btn btn-success"  name="submit" type="submit" value="submit" >Submit form</button>
                        </div>
                     </div>
                  </div>

               </div>
            </div>

         </form>
      </center>
   </div>
</div>


<script>


   $('#frm_contact').on("submit", function (obj) {

      if ($('#name').val()) {
         var name_from_input = $('#name').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร name_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_name').html('กรุณากรอกชื่อ');
      }
      if ($('#lastname').val()) {
         var lastname_from_input = $('#lastname').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร lastname_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_lastname').html('กรุณากรอกชื่อ');
      }
      if ($('#email').val()) {
         var email_from_input = $('#email').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร email_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_email').html('กรุณากรอกนามสกุล');
      }
      if ($('#tel').val()) {
         var tel_from_input = $('#tel').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร email_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_tel').html('กรุณากรอกเบอร์โทรศัพท์');
      }
      if ($('#subject').val()) {
         var subject_from_input = $('#subject').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร email_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_subject').html('กรุณาระบุหัวข้อ');
      }
      if ($('#message').val()) {
         var message_from_input = $('#message').val();  // ถ้ามีค่าให้ใส่ไว้ในตัวแปร email_from_input
      } else {
         // ไม่พบค่าให้แจ้งเตือนข้อความ
         $('.chk_message').html('กรุณากรอกข้อความ');
      }



      console.log(name_from_input);  // เช็คว่าช่อง name ส่งอะไรเข้ามา
      console.log(lastname_from_input);
      console.log(email_from_input);
      console.log(subject_from_input);
      console.log(message_from_input);
      console.log(tel_from_input);


      $.post('/api/formcontact', {name: name_from_input, lastname: lastname_from_input, email: email_from_input, subject: subject_from_input, message: message_from_input, tel: tel_from_input}, function (data) {
         console.log(data);
         if (data == "success") {
            alert("ส่งข้อความเรียบร้อย");
            var url = "http://www.kapookvending.com/2019/form";
            $(location).attr('href', url);
         }
         else {
            alert("ไม่สามารถส่งข้อความได้");
         }
      });

      //alert('Hello') ;
      return false;
   });

   $('.alink')off('click');
   $('.alink').on('click', function (obj) {
      go2View($(obj.target).attr('href'), 'Kapook Vending');
      return false;
   });

</script>