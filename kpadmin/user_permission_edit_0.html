<!--start Breadcrumb-->
<style>
   .text-help { font-size: 11px; font-weight: 400; color: #ff5722; }

</style>
<nav aria-label="breadcrumb">
   <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="cpanel/home" class="alink">Dashboard</a></li>
      <li class="breadcrumb-item"><a href="cpanel/staff/permission_lists" class="alink">Permission</a></li>
      <li class="breadcrumb-item active" aria-current="page">Edit</li>
   </ol>
</nav>
<!--/end Breadcrumb-->

<!-- // Start Content on PAGE /////////////////////////////////////////////////////// -->
<div class="row">
   <div class="content-title">
      <div class="col-md-7 col-sm-7 col-xs-12">
         <h2>Permission <b>Editor</b></h2>
      </div>
      <!--/col-->
      <div class="col-md-5 col-sm-5 col-xs-12">
         <div class="dataTables_wrapper">
            <form method="GET">
               <div class="dataTables_custom" style="width:100%;">
                  <div class="dateMonthPicker">
                     <div class="input-prepend input-group" style="display:none"> <span class="add-on input-group-addon"><i class="fa fa-fw fa-flask"></i></span>
                        <div class="btn-group bootstrap-select input-group-btn form-control input-sm selectCustomW100">
                           <button type="button" class="btn dropdown-toggle btn-default" data-toggle="dropdown" role="button" data-id="permisid" title="Administrator (ผู้ดูแลระบบ)"><span class="filter-option pull-left">Administrator <span style="font-weight:300;color:#999;">(ผู้ดูแลระบบ)</span></span>&nbsp;<span class="bs-caret"><span class="caret"></span></span></button>
                           <div class="dropdown-menu open" role="combobox">
                              <ul class="dropdown-menu inner" role="listbox" aria-expanded="false">
                                 <li data-original-index="0" class="selected"><a tabindex="0" class="" data-tokens="null" role="option" aria-disabled="false" aria-selected="true">Administrator <span style="font-weight:300;color:#999;">(ผู้ดูแลระบบ)</span><span class="glyphicon glyphicon-ok check-mark"></span></a></li>
                                 <li data-original-index="1"><a tabindex="0" class="" data-tokens="null" role="option" aria-disabled="false" aria-selected="false">Monitor <span style="font-weight:300;color:#999;">(ผู้ตรวจสอบ)</span><span class="glyphicon glyphicon-ok check-mark"></span></a></li>
                                 <li data-original-index="2"><a tabindex="0" class="" data-tokens="null" role="option" aria-disabled="false" aria-selected="false">Sales Officer <span style="font-weight:300;color:#999;">(พนักงานขาย)</span><span class="glyphicon glyphicon-ok check-mark"></span></a></li>
                                 <li data-original-index="3"><a tabindex="0" class="" data-tokens="null" role="option" aria-disabled="false" aria-selected="false">VanSale Officer <span style="font-weight:300;color:#999;">(พนักงานหน่วยรถ)</span><span class="glyphicon glyphicon-ok check-mark"></span></a></li>
                              </ul>
                           </div>
                           <select id="permisid" name="permisid" class="form-control input-sm selectpicker selectCustomW100" style="width:100%;" onchange="this.form.submit()" tabindex="-98">
                              <option data-content="Administrator <span style='font-weight:300;color:#999;'>(ผู้ดูแลระบบ)</span>" value="2" selected="">Administrator</option>
                              <option data-content="Monitor <span style='font-weight:300;color:#999;'>(ผู้ตรวจสอบ)</span>" value="3">Monitor</option>
                              <option data-content="Sales Officer <span style='font-weight:300;color:#999;'>(พนักงานขาย)</span>" value="11">Sales Officer</option>
                              <option data-content="VanSale Officer <span style='font-weight:300;color:#999;'>(พนักงานหน่วยรถ)</span>" value="12">VanSale Officer</option>
                           </select>
                        </div>
                     </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
      <!--/col-->
   </div>
   <!--/content-title-->
</div>
<!--/row-->

<div class="row" id="permission_edit_page">
   <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
         <div class="x_title">
            <p class="text-th">แก้ไขข้อมูล เส้นทางเดินรถ</p>
         </div>
         <!--/x_title-->
         <!--         <div class="alert alert-success alert-dismissible fade in" role="alert" style="display: block;">
                     <button type="button" class="close" data-dismiss="alert" aria-label="Close"><i class="fa fa-fw fa-close"></i></button>
                     Permission ID  <b> <span class="permission_id"> </span>   <b>Successful</b>.
                        <i style="margin-left:10px; color:rgba(255,255,255,0.5);">on </i>
                     </b></div>-->


         <div class="x_content">
            <form id="editPermission" class="form-horizontal form-label-left" method="POST" data-parsley-validate="" novalidate>
               <input type="hidden" name="action" value="editPermission">
               <!--
               <input id="bywho" name="bywho" value="" style="display:none;">
               <input id="when" name="when" value="2019-06-14 17:30:33" style="display:none;"> 
               -->
               <div class="row">
                  <div class="col col-md-3 col-sm-4 col-xs-12 col-image">
                     <div class="form-group"> <i class="fa fa-fw fa-user-secret" style=" font-size:12vw; margin:0 auto;"></i> </div>
                  </div>
                  <!--/col-->

                  <div class="col col-md-9 col-sm-8 col-xs-12">
                     <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12"><span class="required">*</span> Level Name</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                           <input class="form-control col-md-7 col-xs-12 permission_per_name" type="text" id="name" name="name" value="" required>
                           <span class="text-help chk_name"></span>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Description</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                           <textarea class="resizable_textarea form-control permission_description" rows="3" id="perdescription" name="description">ผู้ดูแลระบบ</textarea>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Status</label>
                        <div class="col-md-9 col-sm-9 col-xs-12">
                           <select id="status"  class="kiosk_status form-control input-sm selectpicker selectCustomW100">
                              <option value="1">เปิดการใช้งาน</option>
                              <option value="0">ปิดการใช้งาน</option>
                           </select>

                        </div>
                     </div>
                  </div>
                  <!--/col-->


               </div>
               <!--/row-->

               <div class="row">
                  <div class="ln_solid"></div>
                  <div class="col-md-3 col-sm-6 col-xs-12">
                      <a href="/cpanel/staff/permission_lists" class="alink btn btn-default btn-lg btn-block">Back</a>
                  </div>
                  <div class="col-md-9 col-sm-6 col-xs-12">
                     <button class="btn btn-primary btn-lg btn-block" type="submit">Submit Edited</button>
                  </div>
               </div>
               <!--/row-->

            </form>
         </div>
         <!--/x_content-->
      </div>
      <!--/x_panel-->
   </div>
   <!--/col-md-12-->

</div>
<!--/row-->

<script>
   $('.alink').off("click");
   $('.alink').on('click', function (obj) {
      go2View($(obj.target).attr('href'), 'Kapook Vending');
      return false;
   });

   var permissionid_editing;
   
    function permission_showdata(permissionid) {
      //  console.log("permissionid : "+permissionid);
      $.get('/api/member/permissionid/' + permissionid, function (data) {
         permissionid_editing = permissionid;
     //   console.log(permissionid_editing);
         var objjquery = $('#permission_edit_page'); // อยู่ตรง Div Class ="Row
         setdatabyclass(objjquery, 'permission', data);
        // console.log(data);
         if ($('#name').val() =="") {
            $(".chk_name").removeClass('text-help');
         }

      });



   }
/*
    function permission_showdata(permissionid) {
        // console.log(permissionid); // มา
        $.get('/api/member/permissionid/' + permissionid, function (data) {
            permissionid_editing = permissionid;

            var objjquery = $('#permission_edit_page');  
            setdatabyclass(objjquery, 'permission', data);
            console.log('viewing data');
            
            console.log(permission_name)  ;
       });
       
   }

*/


/*
   function permission_showdata(permissionid) {
      
      console.log("Permission : " + permissionid);
      $.get('/api/member/permissionid/' + permissionid, function (data) {
          // console.log("Permission : " + permissionid);
         permissionid = permissionid;

         var objjquery = $('#permission_edit_page');  // อยู่ตรง Div Class ="Row
         setdatabyclass(objjquery, 'permission', data);  // ชื่อนำหน้าที่เรียกใช้
         console.log('viewing data');        

         if ($('#pername').val()) {
            $(".chk_name").removeClass('text-help');
         }
      });
   }
  */    
//   $('.alert-success').hide();

   $('#editPermission').on('submit', function () {
      var errortext;
      var pername       = $('#name').val();
      var description   = $('#perdescription').val();
      var status        = $('#status').val();
      var create        = $.now();
   /*   if (pername == '') {
         // ค่าว่าง
         errortext = 'กรุณากรอก Level Name';
         $(".chk_name").show();
         $(".chk_name").addClass("text-help");
         $('.chk_name').html('จำเป็นต้องกรอก');
      } else {
         // กรอกข้อมูลเข้ามา
         $(".chk_name").hide();
         $(".chk_name").removeClass("text-help");
      }*/
      if (errortext) {
         // แจ้ง error
         var title = 'Edit Permission';
         new PNotify({
            title: title+' Error',
            text: errortext,
            modules: {
               Animate: {
                  animate: true,
                  inClass: 'zoomInLeft',
                  outClass: 'zoomOutRight'
               }
            }
         });

         return false;
      } else {
         // console.log("Err :" +err);
         console.log("SUBMIT" + '/api/member/permissionid/' + permissionid_editing);
         var postdata = {per_id: permissionid_editing, per_name: pername, per_description: description, per_status: status, per_create: create };

         console.log(postdata);
         $.post('/api/member/permissionid/' + permissionid_editing, postdata).done(function (data) {

            //$('.alert-success').show();  // บันทึกสำเร็จให้แสดง
            
            new PNotify({
               title: title+' Success',
               text: 'บันทึกข้อมูลสำเร็จ',
               type: 'success'
            });

            console.log("SUBMIT data " + data);
         });
      }
      console.log("return false");
      return false;
   });

</script>