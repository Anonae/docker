
<nav aria-label="breadcrumb">
   <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="cpanel/home" class="alink">Dashboard</a></li>
      <li class="breadcrumb-item active" aria-current="page">Kiosk Models</li>
   </ol>
</nav>
<!--/end Breadcrumb-->

<!-- // Start Content on PAGE /////////////////////////////////////////////////////// -->
<div class="row">
   <div class="content-title">
      <div class="col-md-8 col-sm-8 col-xs-12">
         <h2>Kiosk Model<b> Lists</b></h2>
      </div>
      <!--/col-->
   </div>
   <!--/content-title-->
</div>
<!--/row-->

<div class="row">
   <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel">
         <div class="x_title">
            <p class="text-th">แสดงรายการ kiosk model ทั้งหมด <b class="text-green" id="total_item"></b> รายการ</p>
            <div class="nav navbar-right">
               <a href="/cpanel/kioskmodel/add" class="alink btn btn-primary btn-sm">
                  <i class="fa fa-fw fa-plus"></i> Add New Model
               </a>
            </div>
         </div>
         <!--/x_title-->
         <div class="x_content">
            <div id="dataTableTCP_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                <form id="filterForm_model" method="GET" class="form form-group" onsubmit="return filterFormsubmit_model()" style="width: 100%">
                  <div class="top">

                     <div id="dataTableTCP_filter" class="dataTables_filter">
                        <label>Search
                           <input type="search" id="search_model" class="form-control input-sm" placeholder="" aria-controls="dataTableTCP">
                        </label>
                     </div>
                     <div class="dataTables_length div_style_ledt" id="dataTableTCP_length">
                        <label>Record/Page
                           <select name="dataTableTCP_length" aria-controls="dataTableTCP" class="form-control input-sm">
                              <option value="10">10</option>
                              <option value="25">25</option>
                              <option value="50">50</option>
                              <option value="100">100</option>
                           </select>
                        </label>
                     </div>
                     <div class="dataTables_paginate paging_simple_numbers" id="dataTableTCP_paginate">
                        <ul class="pagination">
                           <li class="paginate_button previous disabled" id="dataTableTCP_previous"><a href="#" aria-controls="dataTableTCP" data-dt-idx="0" tabindex="0">Previous</a></li>
                           <li class="paginate_button active"><a href="#" aria-controls="dataTableTCP" data-dt-idx="1" tabindex="0">1</a></li>
                           <li class="paginate_button next disabled" id="dataTableTCP_next"><a href="#" aria-controls="dataTableTCP" data-dt-idx="2" tabindex="0">Next</a></li>
                        </ul>
                     </div>
                     <div class="clear"></div>


                  </div>
               </form>
               <table class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline">
                  <thead>
                     <tr>
                        <th style=" width: 100px;"> ID</th>
                        <th>Model Name</th>
                        <th class="text-center" >Image</th>
                        <th class="text-center" style="width: 100px;">Placement</th>
                        <th class="text-center" style="width: 100px;">slot amount</th>
                        <th style="width: 550px;"> Description </th>
                        <th style="width: 120px;">Last Update </th>
                        <th class="text-center" style="width: 120px;">Status </th>
                        <th class="text-center" style="width: 100px;">Action</th>
                     </tr>

                  </thead>
                  <tbody id='mytable'>
                     <tr class='row_tablecontent' style='display:none'>
                        <td class="kioskmodel_id "> ID</td>
                        <td>
                           <strong>
                              <a href="#" class="kioskmodel_model_name kioskmodel_edit_link">
                                 Model Name
                              </a>
                           </strong>
                        </td>
                        <td class="text-center">
                            <a class="avatar_link kioskmodel_edit_link" href="#">
                                <img src="" class="kioskmodel_model_image avatar" style="height:50px; ">
                            </a>
                        </td>
                        <td class="kioskmodel_placement text-center">Placement</td>
                        <td class="kioskmodel_slot_amount text-center">slot amount</td>
                        <td class="kioskmodel_description "> Description </td>
                        <td class="kioskmodel_lastupdate "> --- </td>
                        <td class="kioskmodel_status text-center"> Status </td>
                        <td class="text-center">
                           <a class="btn btn-silver btn-xs kioskmodel_edit_link" title="edit" >
                              <i class="fa fa-fw fa-pencil"></i>
                           </a>
                        </td>
                     </tr>
                  </tbody>
               </table>


               <div class="bottom">
                  <div class="dataTables_paginate paging_simple_numbers">
                     <ul class="pagination">
                        <li class="paginate_button previous disabled">
                           <a href="#" aria-controls="dataTableTCP" data-dt-idx="0" tabindex="0">Previous</a>
                        </li>
                        <li class="paginate_button active"><a href="#" aria-controls="dataTableTCP" data-dt-idx="1" tabindex="0">1</a></li>
                        <li class="paginate_button next disabled"><a href="#" aria-controls="dataTableTCP" data-dt-idx="2" tabindex="0">Next</a></li>
                     </ul>
                  </div>
                  <div class="dataTables_info" id="dataTableTCP_info" role="status" aria-live="polite">Showing 1 to 9 of 9 entries</div>
                  <div class="clear"></div>
               </div>

            </div>
         </div>
         <!--/x_content-->
      </div>
      <!--/x_panel-->
   </div>
   <!--/col-md-12-->

</div>
<!--/row-->

<!-- // End Content on PAGE /////////////////////////////////////////////////////// -->

<script>
   var template_of_testtable = $('#mytable').first().html();
   //console.log(template_of_testtable);
   var maintable = $('#mytable').first();
   //console.log(maintable.html());
   function filterFormsubmit_model() {
      $('#mytable').first().html(template_of_testtable);

      if ($('#search_model').val()) {
         showmodel_list($('#search_model').val());
         console.log('can sent value to function', $('#search_model').val());
      } else {
         showmodel_list('');
      }
      return false;


   }


   function showmodel_list(searchstr_model) {

      console.log('continue', searchstr_model);
      if (searchstr_model) {
         //console.log(parth_model);
         var parth_model = '/api/member/kioskmodel_list/search/' + searchstr_model;
         console.log(parth_model);
      } else {

         var parth_model = '/api/member/kioskmodel_list/';
         console.log(parth_model);
      }

      $.get(parth_model, function (objdata) {
         console.log(objdata);
         $("#total_item").text(objdata.length);
         for (var x = 0; x < objdata.length; x++) {
            var TR = tablerow(maintable, 'kioskmodel', objdata[x], template_of_testtable);
            // console.log(TR.html());
            TR.find('.kioskmodel_edit_link').attr('href', '/cpanel/kioskmodel/edit?kioskmodelid=' + objdata[x]._id);
            if (objdata[x].status == 1) {
               TR.find('.kioskmodel_status').text('เปิดการใช้งาน').attr('style', 'color : green');
            }
            if (objdata[x].status == 0) {
               TR.find('.kioskmodel_status').text('ปิดการใช้งาน').attr('style', 'color : orange');
            }
            
          
            TR.show();
         }
         //console.log("SET THE LINK");


         $('.kioskmodel_edit_link').on('click', function (obj) {
            go2View($(obj.currentTarget).attr('href'), 'Editing Kiosk model');
            return false;
         });
      });
   }
   showmodel_list('');

   $('.alink').off("click");
   $('.alink').on('click', function (obj) {  // ตัวอย่าง <a href="cpanel/staff/qrcode" class='alink'>QR Code</a>
      go2View($(obj.target).attr('href'), 'Kapook Vending');
      return false;
   });

</script>